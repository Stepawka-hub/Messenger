"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[390],{2390:(s,t,e)=>{e.r(t),e.d(t,{default:()=>B});var a=e(5043),o=e(3003),r=e(1436);const l=s=>({type:r.aD,status:s});var i=e(579);const n=e(3218),c=s=>(0,i.jsxs)("article",{className:"post",children:[(0,i.jsx)("img",{src:n,className:"avatar",alt:"Avatar"}),(0,i.jsx)("span",{className:"post__text",children:s.message})]}),u=s=>s.profilePage,m=s=>u(s).posts,d=s=>u(s).profile,p=s=>u(s).status;var _=e(5963),x=e(1721);const f="AddPostForm_form__ubZSh",j="AddPostForm_form__textarea__DsVjx",h="AddPostForm_form__submit__M6sjm";var b=e(5291),v=e(6545);const N=(0,e(151).M)("textarea"),g=(0,v.T)(255),A=(0,x.A)({form:"add-post"})((s=>{let{handleSubmit:t}=s;return(0,i.jsxs)("form",{className:f,onSubmit:t,children:[(0,i.jsx)(_.A,{id:"newPostText",name:"newPostText",component:N,classElement:`textarea ${j}`,placeholder:"\u0427\u0442\u043e \u0443 \u0432\u0430\u0441 \u043d\u043e\u0432\u043e\u0433\u043e?",validate:[v.mw,g]}),(0,i.jsx)(b.A,{text:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",className:h})]})})),S=()=>{const s=(0,o.wA)(),t=(0,o.d4)(m).map((s=>(0,i.jsx)(c,{postid:s.postid,message:s.message},s.postid)));return(0,i.jsxs)("div",{className:"posts-container",children:[(0,i.jsx)("h3",{className:"posts-container__title",children:"My posts"}),(0,i.jsx)("div",{className:"new-post-container",children:(0,i.jsx)(A,{onSubmit:t=>{var e;s((e=t.newPostText,{type:r.pN,newPostText:e}))}})}),(0,i.jsx)("section",{className:"post-list",children:t})]})};var k=e(3218),w=e(7972);const P="ProfileStatus_status__m7xWq",F="ProfileStatus_status__label__jkbhY",y="ProfileStatus_status__input__m64V+",U=s=>{let[t,e]=(0,a.useState)(!1),[o,r]=(0,a.useState)(s.status);(0,a.useEffect)((()=>{r(s.status)}),[s.status]);return(0,i.jsxs)("div",{className:P,children:[(0,i.jsx)("span",{className:F,children:s.label}),t?(0,i.jsx)("input",{autoFocus:!0,className:y,value:o,onChange:s=>{r(s.currentTarget.value)},onBlur:()=>{e(!1),s.updateUserStatus(o)}}):(0,i.jsx)("span",{onDoubleClick:()=>{e(!0)},children:s.status||"\u041d\u0435\u0442"})]})},D={item:"ProfileInfoItem_item__DEWdm",item__label:"ProfileInfoItem_item__label__yVu12",contacts:"ProfileInfoItem_contacts__W9AMW"},I=s=>(0,i.jsxs)("div",{className:`${D.item} ${s.contacts&&D.contacts}`,children:[(0,i.jsx)("span",{className:D.item__label,children:`${s.label}: `}),(0,i.jsx)("span",{className:D.item__value,children:s.value})]}),M=s=>{let{profile:t,status:e,updateUserStatus:a}=s;if(!t)return(0,i.jsx)(w.A,{});const o={aboutMe:"\u041e\u0431\u043e \u043c\u043d\u0435",lookingForAJob:"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443",lookingForAJobDescription:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u043e\u0438\u0441\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u044b"},r={aboutMe:t.aboutMe||"\u041d\u0435\u0442",lookingForAJob:t.lookingForAJob?"\u0414\u0430":"\u041d\u0435\u0442",lookingForAJobDescription:t.lookingForAJobDescription||"\u041d\u0435\u0442"},l={vk:t.contacts.vk||"-",facebook:t.contacts.facebook||"-",twitter:t.contacts.twitter||"-",instagram:t.contacts.instagram||"-",github:t.contacts.github||"-"};return(0,i.jsxs)("div",{className:"profile-container",children:[(0,i.jsxs)("div",{className:"profile-info",children:[(0,i.jsx)("div",{className:"profile-info__avatar",children:(0,i.jsx)("img",{src:t.photos.small||k,alt:"Avatar"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"profile-info__title",children:t.fullName||"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,i.jsxs)("div",{className:"profile-info__description",children:[(0,i.jsx)(U,{label:"\u0421\u0442\u0430\u0442\u0443\u0441: ",status:e,updateUserStatus:a}),Object.entries(r).map(((s,t)=>{let[e,a]=s;return(0,i.jsx)(I,{label:o[e],value:a},t)}))]})]})]}),(0,i.jsxs)("div",{className:"profile-contacts",children:[(0,i.jsx)("h3",{className:"profile-contacts__title",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),Object.entries(l).map(((s,t)=>{let[e,a]=s;return(0,i.jsx)(I,{contacts:!0,label:e,value:a},t)}))]})]})},J=s=>{let{profile:t,status:e,updateUserStatus:a}=s;return(0,i.jsxs)("section",{className:"profile",children:[(0,i.jsx)(M,{profile:t,status:e,updateUserStatus:a}),(0,i.jsx)(S,{})]})};var T=e(3390);const C=s=>async t=>{const e=await T._F.getProfile(s);var a;t((a=e,{type:r.B6,profile:a}))};var W=e(5317),E=e(3750),$=e(3923),V=e(3978);const B=(0,$.Zz)(W.A,E.A)((s=>{const t=(0,o.wA)(),e=(0,o.d4)(d),r=(0,o.d4)(p),n=(0,o.d4)(V.WR);(0,a.useEffect)((()=>{const e=s.router.params.userId||n;t(C(e)),t((s=>async t=>{const e=await T._F.getUserStatus(s);t(l(e.data))})(e))}),[]);return(0,i.jsx)(J,{profile:e,status:r,updateUserStatus:s=>{t((s=>async t=>{0===(await T._F.updateUserStatus(s)).data.resultCode&&t(l(s))})(s))}})}))}}]);
//# sourceMappingURL=390.9a5eab2e.chunk.js.map